

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Main Modules &mdash; Graduate Data Analysis 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=d45e8c67"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Website Modules" href="src.website.html" />
    <link rel="prev" title="Graduate Data Analysis documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Graduate Data Analysis
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Main Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-load_data">Data Loading Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load_data.data_to_base"><code class="docutils literal notranslate"><span class="pre">data_to_base()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-query_data">Data Query Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#query_data.run_queries"><code class="docutils literal notranslate"><span class="pre">run_queries()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-update_database">Database Update Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#update_database.clean_data"><code class="docutils literal notranslate"><span class="pre">clean_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#update_database.find_recent"><code class="docutils literal notranslate"><span class="pre">find_recent()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#update_database.process_data_with_llm"><code class="docutils literal notranslate"><span class="pre">process_data_with_llm()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#update_database.updated_scrape"><code class="docutils literal notranslate"><span class="pre">updated_scrape()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="src.website.html">Website Modules</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Graduate Data Analysis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Main Modules</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/src.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="main-modules">
<h1>Main Modules<a class="headerlink" href="#main-modules" title="Link to this heading"></a></h1>
<section id="module-load_data">
<span id="data-loading-module"></span><h2>Data Loading Module<a class="headerlink" href="#module-load_data" title="Link to this heading"></a></h2>
<p>This module reads JSON data containing applicant details, creates (or resets) the
<cite>applicants</cite> table, and inserts the data into the table.</p>
<p>Intended to be run manually or used as a utility during data updates.</p>
<dl class="simple">
<dt>Environment Variables:</dt><dd><p>DATABASE_URL (str): PostgreSQL connection string used to connect to the database.</p>
</dd>
<dt>Usage:</dt><dd><p>python update_database.py</p>
</dd>
<dt>Input:</dt><dd><p>JSON file (e.g., ‘llm_extend_applicant_data.json’) with a list of applicant entries.</p>
</dd>
<dt>Each entry should include:</dt><dd><ul class="simple">
<li><p>program, comments, date_added, url, status, term, US/International,
GPA, GRE, GRE_V, GRE_AW, Degree, llm-generated-program, llm-generated-university</p></li>
</ul>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="load_data.data_to_base">
<span class="sig-prename descclassname"><span class="pre">load_data.</span></span><span class="sig-name descname"><span class="pre">data_to_base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">FILENAME</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#load_data.data_to_base" title="Link to this definition"></a></dt>
<dd><p>Function to add applicant data from json file to database</p>
</dd></dl>

</section>
<section id="module-query_data">
<span id="data-query-module"></span><h2>Data Query Module<a class="headerlink" href="#module-query_data" title="Link to this heading"></a></h2>
<p>This module connects to the database using the <cite>DATABASE_URL</cite> environment variable
and defines a set of queries that return insights into applicant data, such as
application volume, acceptance rates, GPA statistics, and other trends.</p>
<p>The <cite>run_queries()</cite> function is used to extract a dictionary of human-readable
questions and corresponding answers based on current data.</p>
<dl>
<dt>Environment Variables:</dt><dd><p>DATABASE_URL (str): PostgreSQL connection string used to connect to the database.</p>
</dd>
<dt>Functions:</dt><dd><dl class="simple">
<dt>run_queries() -&gt; dict</dt><dd><p>Executes predefined SQL queries and returns answers with associated questions.</p>
</dd>
</dl>
</dd>
<dt>Usage:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">query_data</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_queries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">run_queries</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">])</span>  <span class="c1"># (&quot;How many entries...&quot;, 154)</span>
</pre></div>
</div>
</dd>
<dt>Example CLI Execution:</dt><dd><p>$ python query_data.py</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="query_data.run_queries">
<span class="sig-prename descclassname"><span class="pre">query_data.</span></span><span class="sig-name descname"><span class="pre">run_queries</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#query_data.run_queries" title="Link to this definition"></a></dt>
<dd><p>Defines SQL queries and interrogates database, storing answers in a dictionary</p>
</dd></dl>

</section>
<section id="module-update_database">
<span id="database-update-module"></span><h2>Database Update Module<a class="headerlink" href="#module-update_database" title="Link to this heading"></a></h2>
<p>The module obtains new data for a PostgreSQL database by performing the following steps:
1. Identifies the most recent entry in the database by extracting entry IDs from URLs.
2. Scrapes new applicant data from TheGradCafe, stopping once previously recorded entries are encountered.
3. Cleans and formats the scraped data to standardize it and remove inconsistencies.
4. Processes the cleaned data using an LLM to enrich or standardize information.</p>
<dl class="simple">
<dt>Dependencies:</dt><dd><ul class="simple">
<li><p>os</p></li>
<li><p>re</p></li>
<li><p>json</p></li>
<li><p>psycopg</p></li>
<li><p>urllib3</p></li>
<li><p>BeautifulSoup (bs4)</p></li>
<li><p>subprocess</p></li>
<li><p>tempfile</p></li>
</ul>
</dd>
<dt>Environment Variables:</dt><dd><p>DATABASE_URL (str): PostgreSQL connection string used to connect to the database.</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="update_database.clean_data">
<span class="sig-prename descclassname"><span class="pre">update_database.</span></span><span class="sig-name descname"><span class="pre">clean_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#update_database.clean_data" title="Link to this definition"></a></dt>
<dd><p>Convert data to desired format and remove bad data.
Output data is ready to be procseed by LLM.
Adapted from Module 2 assignment.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="update_database.find_recent">
<span class="sig-prename descclassname"><span class="pre">update_database.</span></span><span class="sig-name descname"><span class="pre">find_recent</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#update_database.find_recent" title="Link to this definition"></a></dt>
<dd><p>Function to find most recent entry in database.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="update_database.process_data_with_llm">
<span class="sig-prename descclassname"><span class="pre">update_database.</span></span><span class="sig-name descname"><span class="pre">process_data_with_llm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cleaned_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#update_database.process_data_with_llm" title="Link to this definition"></a></dt>
<dd><p>Process cleaned data through the LLM app.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="update_database.updated_scrape">
<span class="sig-prename descclassname"><span class="pre">update_database.</span></span><span class="sig-name descname"><span class="pre">updated_scrape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recent_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#update_database.updated_scrape" title="Link to this definition"></a></dt>
<dd><p>Scrape new data from TheGradCafe using Beautiful Soup.
Function ensures new data by comparing scraped entry id to previous 
largest entry id (input to the function).
Returns a list of grad school applicant entry data.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Graduate Data Analysis documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="src.website.html" class="btn btn-neutral float-right" title="Website Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Holly Kipouros.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>